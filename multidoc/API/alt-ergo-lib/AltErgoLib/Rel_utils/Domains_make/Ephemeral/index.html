<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ephemeral (alt-ergo-lib.AltErgoLib.Rel_utils.Domains_make.Ephemeral)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">alt-ergo-lib</a> &#x00BB; <a href="../../../index.html">AltErgoLib</a> &#x00BB; <a href="../../index.html">Rel_utils</a> &#x00BB; <a href="../index.html">Domains_make</a> &#x00BB; Ephemeral</nav><header class="odoc-preamble"><h1>Module <code><span>Domains_make.Ephemeral</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-handle"><a href="#type-handle" class="anchor"></a><code><span><span class="keyword">type</span> handle</span></code></div><div class="spec-doc"><p>A mutable handle to the domain associated with a semantic value. Can be used to access and update the domain.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(!!)"><a href="#val-(!!)" class="anchor"></a><code><span><span class="keyword">val</span> (!!) : <span><a href="#type-handle">handle</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-elt">elt</a></span></code></div><div class="spec-doc"><p>Return the domain associated with the <code>handle</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : <span><span class="label">ex</span>:<a href="../../../Explanation/index.html#type-t">Explanation.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-handle">handle</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-elt">elt</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Intersect the domain associated with the <code>handle</code> with the provided <code>domain</code>. The explanation <code>ex</code> justifies that the <code>domain</code> applies to the <code>handle</code>'s representative.</p><p>If this changes the domain associated with the handle, the handle is marked as changed.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../argument-1-Domain/index.html#exception-Inconsistent"><code>Domain.Inconsistent</code></a> <p>if the intersection is empty.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Mutable mappings from semantic values to <code>domain</code>s.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-handle"><a href="#val-handle" class="anchor"></a><code><span><span class="keyword">val</span> handle : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../Shostak/Combine/index.html#type-r">X.r</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-handle">handle</a></span></code></div><div class="spec-doc"><p><code>handle t r</code> returns the <code>handle</code> associated with <code>r</code>.</p><p>There is a unique handle associated with each semantic value <code>r</code> that is created on-the-fly when <code>handle t r</code> is called for the first time.</p><p>The domain associated with the handle is initialized from the underlying persistent domain the first time it is accessed, and updated with <code>update</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-structural_propagation"><a href="#val-structural_propagation" class="anchor"></a><code><span><span class="keyword">val</span> structural_propagation : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../Shostak/Combine/index.html#type-r">X.r</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Perform structural propagation for the given representative.</p><p>More precisely, if <code>r</code> is a leaf, the domain of <code>r</code> is propagated to any semantic value that contains <code>r</code> as a leaf according to the structure of that semantic value (using <code>Domain.map_leaves</code>); if <code>r</code> is not a leaf, its domain is propagated to any of the leaves it contains.</p><p>We only perform *forward* structural propagation: if structural propagation causes a domain of a leaf or parent to be changed, then we only mark that leaf or parent as changed.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../index.html#exception-Inconsistent"><code>Inconsistent</code></a> <p>if an inconsistency if detected during structural propagation.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter_changed"><a href="#val-iter_changed" class="anchor"></a><code><span><span class="keyword">val</span> iter_changed : <span><span>(<span><a href="../../../Shostak/Combine/index.html#type-r">X.r</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Iterate over all the semantic values that have been marked as changed since the last call to <code>clear_changed</code>. Values are marked as changed by <code>update</code> whenever their domain shrinks.</p><p><b>Warning</b>: The behavior is not specified if the ephemeral domain is modified during iteration, such as by calling <code>update</code> or <code>structural_propagation</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-clear_changed"><a href="#val-clear_changed" class="anchor"></a><code><span><span class="keyword">val</span> clear_changed : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Remove the <code>changed</code> flag from all values.</p></div></div></div></body></html>
